\documentclass[adraft]{eptcs}
\usepackage[utf8]{inputenc}

\usepackage[toc,page]{appendix}

% Defines \FloatBarrier
% The "section" parameter makes floats stay in the section they are defined in.
\usepackage[section]{placeins}

\usepackage{graphicx}
%\usepackage{listings}
\usepackage{eslistings}
\usepackage{parcolumns}
\usepackage{amsmath}
\usepackage{url}
\usepackage{breakurl}
\usepackage{todonotes}

\usepackage{tikz-timing}

\renewcommand{\abstractname}{Abstract}

%TODO: center listings
\lstset{language=C,frame=L,style=ESStyle,tabsize=2,basicstyle=\small\ttfamily}
%\lstset{language=C,frame=L,basicstyle=\small\ttfamily,tabsize=2}
\lstset{numbersep=10pt}
\lstset{xleftmargin=5.0ex}
\lstset{numbers=left}
% Captions to the bottom
\lstset{captionpos=b}
\lstset{breaklines=false}

% Not used and has a tendency to break code.
\lstset{mathescape=false}

\newcommand{\ie}{i.~e.}
\newcommand{\Ie}{I.~e.}
\newcommand{\eg}{e.g.}
\newcommand{\Eg}{E.~g.}



\title{SCAD Architecture Project Paper}

\author{Julius Roob, ...
	\institute{University of Kaiserslautern, Embedded Systems Group}
	\email{julius@juliusroob.de}, ...
}

\begin{document}
	\maketitle \newpage
	\tableofcontents \newpage
	%\listoftodos \newpage
	\section{Move Instruction Bus}
		\subsection{2-Phase Commit}
			To take into account both stalls of source and destination functional units, the control unit sends move instructions in two phases, both of which are indicated by a rising edge of the "valid" flag.
			First, with phase low, the functional units only check whether there is space in the corresponding input and output buffers.
			When stalls are asserted, the control unit waits some time until retrying.
			When no functional unit stalls, the phase being high signals a "write".
			
			\begin{figure}
				\begin{tikztimingtable}
					src & 8D{data} \\
					dest & 8D{data} \\
					phase & LLLLL \\
					valid & LHHHH \\
					src\_stalled & LLLLL \\
					dest\_stalled & LLLHH \\
				\end{tikztimingtable}
				\caption{A timing diagram}
			\end{figure}

	\section{Control Unit and Data Network}
		To keep the MIB simple, we will have the control unit send immediat values, and receive branch conditions through the data network.
		While broadcasting immediate values through either the MIB or a separate bus may be the faster alternative, having the control unit send them through the data network keeps the architecture cleaner\todo{nicer}.

	\nocite{*}
	\bibliographystyle{eptcs}
	%\bibliography{todo}
\end{document}

